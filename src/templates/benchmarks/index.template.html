{%TEMPLATE->struct/head%}
{%TEMPLATE->struct/menu%}
<h2>Benchmarks ([[numBenchmarks]])</h2>
{%TEMPLATE->struct/messages%}
<div style='overflow: auto;'>
  <form style ='float: left; padding-right: 5px;' action="tasks.php" class='form-inline' method="POST" onSubmit="if (!confirm('Really refresh the cache?')) return false;">
    <input type='hidden' name='action' value='[[$DBenchmarkAction::DELETE_BENCHMARK]]'>
    <input type="hidden" name="csrf" value="[[csrf]]">
    <input type="submit" value="Refresh cache" class='btn {{IF [[toggledarkmode]] > 0}}btn-primary{{ELSE}}btn-light{{ENDIF}}'>
  </form>
</div>
<br>
<div class="card">
  <div class="table-responsive">
    <table class="table table-bordered table-sm" id="benchmarks">
      <thead>
        <tr>
          <th>Benchmark id</th>
          <th>Benchmark Cmd</th>
          <th>Benchmark Hashmode</th>
          <th>CPU/GPU</th>
          <th>Benchmark value</th>
          <th>ttl</th>
          <th>action</th>
        </tr>
      </thead>
      <tbody>
        {{FOREACH benchmark;[[benchmarks]]}}
          <tr>
            <td><a href="benchmark.php?id=[[benchmark.getId()]]">[[benchmark.getId()]]</a></td>
            <td><a >[[benchmark.getAttackParameters()]]</a></td>
            <td><a >[[benchmark.getHashMode()]]</a></td>
            <td><a >[[str_replace("\n","<br>",[[benchmark.getHardwareGroupId()]])]]</a></td>
            <td><a >[[benchmark.getBenchmarkValue()]]</a></td>
            <td data-sort="[[benchmark.getTtl()]]">[[date([[config.getVal(DConfig::TIME_FORMAT)]], [[benchmark.getTtl()]])]]</td>
            {{IF [[accessControl.hasPermission([[$DAccessControl::DELETE_BENCHMARK_ACCESS]])]]}}
              <td>
                <form action="benchmark.php" method="POST" class="float-right" onSubmit="if (!confirm('Really delete benchmark [[benchmark.getId()]]?')) return false;">
                  <input type='hidden' name='action' value='[[$DBenchmarkAction::DELETE_BENCHMARK]]'>
                  <input type="hidden" name="benchmarkId" value="[[benchmark.getId()]]">
                  <input type="hidden" name="csrf" value="[[csrf]]">
                  <button type="submit" class='btn btn-danger' data-toggle="tooltip" data-placement="top" title="Delete"><i class="fas fa-trash" aria-hidden="true"></i></button>
                </form>
              </td>
            {{ELSE}}
              <td>&nbsp;</td>
            {{ENDIF}}
          </tr>
        {{ENDFOREACH}}
      </tbody>
    </table>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#benchmarks').DataTable({
          pageLength: 50,
          "order": [ [0, 'asc'] ],
          "columnDefs": [
            { "orderable": false, "targets": [5] },
            { "orderable": true, "targets": [0, 1, 2, 3] }
          ]
        });
      });
    </script>
  </div>
</div>
{%TEMPLATE->struct/foot%}